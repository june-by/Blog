---
title: "ì»´í¬ë„ŒíŠ¸ ìƒì„± NodeJS CLI í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸°"
date: "2022-12-23"
lastmod: "2022-12-23"
category: "NodeJS"
description: "ì»´í¬ë„ŒíŠ¸ ìƒì„± ê³¼ì •ì—ì„œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ NodeJS CLIí”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´, ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ ìë™í™”í•œ ë‚´ìš©ì— ëŒ€í•´ ë‹¤ë£¬ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤."
thumbNail: "https://github.com/BY-juun/Blog/assets/78716842/932fab73-a310-4815-a7d5-de61726c1ce9"
---

# ğŸŒŸë°°ê²½

ì—”ì§€ë‹ˆì˜¤ í´ë¼ì´ì–¸íŠ¸ í”„ë¡œì íŠ¸ì˜ ê²½ìš°, ê°Â `ì»´í¬ë„ŒíŠ¸`ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

```text
ComponentDirectory
â”œâ”€ index.tsx
â”œâ”€ styles.module.scss
â””â”€ test
Â  â””â”€ index.test.tsx

```

`ì»´í¬ë„ŒíŠ¸ Directory`ì•ˆì—,Â `ì»´í¬ë„ŒíŠ¸ ì½”ë“œ`ë¥¼ ì‘ì„±í•˜ëŠ”Â `index.tsx`,Â `ìŠ¤íƒ€ì¼ ê´€ë ¨ ì½”ë“œ`ë¥¼ ì‘ì„±í•˜ëŠ”Â `styles.module.scss`,Â `í…ŒìŠ¤íŠ¸`Â ê´€ë ¨ íŒŒì¼ì„ ëª¨ìœ¼ëŠ”Â `test Directory`ì™€ í•´ë‹¹ Directory ë‚´ì— ì¡´ì¬í•˜ëŠ”Â `test`ë¥¼ ìœ„í•œÂ `index.test.tsx`Â íŒŒì¼ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

ê¸°ì¡´ì—, ì—¬ëŸ¬Â `Extension`ë“¤ì—ì„œ ì œê³µí•˜ëŠ”Â `ë‹¨ì¶•í‚¤`ë¥¼ í†µí•´, ë¹ ë¥´ê²ŒÂ `íƒ¬í”Œë¦¿ ì½”ë“œ`ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆì—ˆì§€ë§Œ, ì—”ì§€ë‹ˆì˜¤ í´ë¼ì´ì–¸íŠ¸ì˜ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ê¼­ ì‚¬ìš©í•˜ëŠ”Â `ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ`ë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ, NodeJSë¥¼ í™œìš©í•œ CLI í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ê³ , ëª…ë ¹ì–´ë¥¼ ë“±ë¡í•´, ì´ ê³¼ì •ì„ ìë™í™”í•˜ë„ë¡ ë§Œë“¤ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

<br />

# âš™ï¸ í”„ë¡œì íŠ¸ ìƒì„±ê³¼ ì „ì—­ ì„¤ì¹˜

ë¨¼ì €, í”„ë¡œì íŠ¸ì— ì‚¬ìš©ë Â `Directory`ë¥¼ ìƒì„±í•œ ë’¤,Â `npm init`ì„ í†µí•´Â `package.json`Â íŒŒì¼ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

<img src="https://github.com/BY-juun/Blog/assets/78716842/2ee53539-5478-44f3-8e21-da0f17b51361" />

ë‹¤ìŒìœ¼ë¡œ, í”„ë¡œê·¸ë¨ì˜Â `entry point`ê°€ ë ,Â `index.js`Â íŒŒì¼ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

```js title="index.js"
//index.js
#! /usr/bin/env node
console.log("engineeo-component-creator");

```

ëª…ë ¹ì–´ë¥¼ ë“±ë¡í•˜ê¸° ì´ì „ì—,Â `pakage.json`Â íŒŒì¼ì— ë“±ë¡í•  ëª…ë ¹ì–´ë¥¼Â `bin`Â ì— ë„£ì–´ì¤ë‹ˆë‹¤.

```json
{
  "name": "engineeo-component-creator",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "type": "module",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "By_Juun",
  "bin": {
    "ecc": "./index.js"
  },
  "license": "MIT"
}
```

ë‹¤ìŒì€,Â `npm i -g`Â ëª…ë ¹ì–´ë¥¼ í†µí•´, ì§€ê¸ˆê¹Œì§€ ë§Œë“  í”„ë¡œì íŠ¸ë¥¼ ì „ì—­ ë“±ë¡ ì‹œì¼œì£¼ì—ˆìŠµë‹ˆë‹¤.

`npm i -g`Â ë’¤ì— íŠ¹ì • ì´ë¦„ì„ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´, í˜„ì¬ ìœ„ì¹˜í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ë¥¼ ì „ì—­ìœ¼ë¡œ ë“±ë¡ ì‹œì¼œì¤ë‹ˆë‹¤.

ì´í›„, ëª…ë ¹ì–´ê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

<img src="https://github.com/BY-juun/Blog/assets/78716842/5ef447fd-f66e-49d7-924d-1741c2c34c7f" />

<br />

# â˜‘ï¸ ì…ë ¥ê°’ ê²€ì¦

ë§Œë“¤ê¸°ë¡œ ì˜ˆìƒí•œ í”„ë¡œê·¸ë¨ì€ ì´ 2ê°œì˜ ì¸ìë¥¼ ë°›ìŠµë‹ˆë‹¤. (ì»´í¬ë„ŒíŠ¸ê°€ ìƒì„±ë  ê²½ë¡œ, ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„)

ë”°ë¼ì„œ, ì¸ìê°€ 2ê°œ ì¸ì§€ ì•„ë‹Œì§€ ê²€ì¦í•˜ëŠ” ì ˆì°¨ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

`NodeJS`Â `CLI í”„ë¡œê·¸ë¨`ì˜ ê²½ìš°,Â `process.argv`Â ë¥¼ í†µí•´ ì¸ìë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
const VALID_ARGV_LENGTH = 2;

function DoArgvLengthValidation() {
  if (argv.length !== VALID_ARGV_LENGTH) {
    console.error("ì¸ìëŠ” ê²½ë¡œì™€ í´ë”ëª… ë‘ ê°€ì§€ ì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
    return false;
  }
  return true;
}

function main() {
  const componentPath = argv[0];
  const componentName = argv[1];
  if (!DoArgvLengthValidation()) return;
}

main();
```

# ğŸ“„ Template String

ë‹¤ìŒìœ¼ë¡œ, íŒŒì¼ì„ ìƒì„±í•˜ê¸° ì´ì „ì—, ê° íŒŒì¼ë“¤ì— ë“¤ì–´ê°ˆ ë‚´ìš©ë“¤ì„ Template Literal Stringì„ í†µí•´ ë§Œë“œëŠ” í•¨ìˆ˜ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

```js
export function makeReactTemplate(name) {
  return `import React from 'react';
import styles from './styles.module.scss';

const ${name} = () => {
    return <div>${name}</div>;
};

export default ${name};
`;
}

export function makeScssTemplate() {
  return `@import 'src/utils/utils';
  `;
}

export function makeTestTemplate(name) {
  return `import React from 'react';
import { render } from '@testing-library/react';
import { useRecoilWrapper } from 'src/utils/test_utils';
import ${name} from '..';

describe('<${name} />', () => {
    it('rendering test', () => {
        render(useRecoilWrapper(<${name} />));
    });
});
`;
}
```

ì—”ì§€ë‹ˆì˜¤ í”„ë¡œì íŠ¸ì—ì„œëŠ”, ê° íŒŒì¼ë§ˆë‹¤ ë°˜ë“œì‹œ ë“¤ì–´ê°€ëŠ” ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œê°€ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤.

`ì»´í¬ë„ŒíŠ¸ íŒŒì¼`ì˜ ê²½ìš°,Â `React import`,Â `Style import`,Â `component function`,Â `export default component`Â ê°€ ìˆìœ¼ë©°,

`ìŠ¤íƒ€ì¼ íŒŒì¼`ì˜ ê²½ìš°, ë‚´ë¶€ì ìœ¼ë¡œ ë°˜ì‘í˜• ì›¹ ë””ì§€ì¸ê³¼ ìƒ‰ìƒ ì½”ë“œë¥¼ ìœ„í•´ ë§Œë“¤ì–´ ë†“ì€Â `íŒŒì¼ì„ import`Â í•˜ëŠ” ì½”ë“œê°€ ìˆê³ ,

`í…ŒìŠ¤íŠ¸ íŒŒì¼`ì˜ ê²½ìš°, í•„ìš”í•œÂ `Library import`, ê¸°ë³¸ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ”Â `Rendering testë¥¼ ìœ„í•œ ì½”ë“œ`, RecoilRootë¥¼ Wrapping í•´ì£¼ëŠ”Â `useRecoilWrapper í›… import`ì™€ useRecoilWrapper í›…ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¼ ë’¤,Â `React-testing-librayì˜ renderë¥¼ í†µí•´, ë Œë”ë§`Â í•˜ëŠ” ì½”ë“œê°€ ìˆìŠµë‹ˆë‹¤.

<br />

# ğŸ›  ì»´í¬ë„ŒíŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±ê³¼ ê° íŒŒì¼ ìƒì„±

ë§ˆì§€ë§‰ìœ¼ë¡œ, ê° ì»´í¬ë„ŒíŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±ê³¼ ê° íŒŒì¼ ìƒì„±ì„ ìœ„í•œ ì½”ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

```js
export function isExistDirectory(path) {
  const isExist = fs.existsSync(ENGINEEO_PROJECT_BASEPATH + path);
  if (isExist) console.error("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤");
  return isExist;
}

export function createComponentDirectory(path) {
  fs.mkdirSync(ENGINEEO_PROJECT_BASEPATH + path);
}

export function createComponentFile(path, fileContent) {
  fs.writeFileSync(
    ENGINEEO_PROJECT_BASEPATH + path + "/index.tsx",
    fileContent
  );
}

export function createScssFile(path, fileContent) {
  fs.writeFileSync(
    ENGINEEO_PROJECT_BASEPATH + path + "/styles.module.scss",
    fileContent
  );
}

export function createTestDirectory(path) {
  fs.mkdirSync(ENGINEEO_PROJECT_BASEPATH + path + "/test");
}

export function createTestFile(path, fileContent) {
  fs.writeFileSync(
    ENGINEEO_PROJECT_BASEPATH + path + "/test/index.test.tsx",
    fileContent
  );
}
```

ê·¸ë¦¬ê³ ,Â `main í•¨ìˆ˜`ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ë“¤ì„ í˜¸ì¶œí•´,Â `ë””ë ‰í† ë¦¬`ì™€Â `íŒŒì¼`ì„ ìƒì„±í•©ë‹ˆë‹¤.

```js
function main() {
  const componentPath = argv[0];
  const componentName = argv[1];
  if (!DoArgvLengthValidation()) return;
  if (isExistDirectory(componentPath)) return;
  createComponentDirectory(componentPath);
  createTestDirectory(componentPath);
  createComponentFile(componentPath, makeReactTemplate(componentName));
  createScssFile(componentPath, makeScssTemplate());
  createTestFile(componentPath, makeTestTemplate(componentName));
}

main();
```

ê²°ê³¼

![1671728015545_á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-12-23 á„‹á…©á„Œá…¥á†« 1 53 18](https://github.com/BY-juun/Blog/assets/78716842/8f0e3d49-135d-4f3f-9d1c-587ed9565cda)
![1671728050314_á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-12-23 á„‹á…©á„Œá…¥á†« 1 54 04](https://github.com/BY-juun/Blog/assets/78716842/dd5f36ce-68f2-4094-b5af-f3042e869801)

<br />

# ğŸ”§ ê²°ë¡  ë° ê°œì„  ë°©í–¥

í˜¼ìì„œ ì‚¬ìš©í•˜ê±°ë‚˜, íŒ€ì›ë“¤ê³¼ ì‚¬ìš©í•  ìƒê°ì´ë¼ ì…ë ¥ê°’ ê²€ì¦ì— ëŒ€í•œ ë¶€ë¶„ì´ ì•„ì§ ë¶€ì¡±í•˜ë‹¤ê³  ìƒê°ì´ ë“­ë‹ˆë‹¤.

ê²€ì¦ì— ëŒ€í•œ ì½”ë“œë¥¼ ì¶”ê°€í•˜ë©´ ë”ìš± ì•ˆì •ì ì¸ CLI í”„ë¡œê·¸ë¨ì´ ë ê±° ê°™ìŠµë‹ˆë‹¤.

ì´í›„ì—ë„, ì´ëŸ° CLI í”„ë¡œê·¸ë¨, ë””ìì¸ ì‹œìŠ¤í…œ, ê·¸ ì™¸ ì—¬ëŸ¬ ìë™í™” ë°©ë²•ì„ ë„ì…í•´, ìƒì‚°ì„±ì„ ì¦ê°€ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë°©í–¥ìœ¼ë¡œ, ê°œì„ í•´ ë‚˜ê°ˆ ì˜ˆì •ì…ë‹ˆë‹¤.
