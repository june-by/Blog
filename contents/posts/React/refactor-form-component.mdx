---
title: "ë°ì´í„° êµ¬ì¡°ì— ìœ ì—°í•˜ë„ë¡ Form ì»´í¬ë„ŒíŠ¸ ê°œì„ í•˜ê¸°"
date: "2023-09-05"
lastmod: "2023-09-05"
category: "React"
tags: ["context", "react-hook-form"]
series: "Blog ê°œë°œì¼ì§€"
description: "ë°ì´í„°ì™€ íƒ€ì…ì— ê°•í•˜ê²Œ ê²°í•©ë˜ì–´ ìˆë˜ Form ì»´í¬ë„ŒíŠ¸ë¥¼ ë³€í™”ì— ìœ ì—°í•˜ë„ë¡ ê°œì„ í•œ ë‚´ìš©ì„ ë‹¤ë£¬ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤."
thumbNail: "https://github.com/BY-juun/Blog/assets/78716842/34dd9395-0ca8-4898-8412-d84f7de9902b"
---

# ğŸŒ†Â ë°°ê²½

ê¸°ì¡´ ë¸”ë¡œê·¸ì—ì„œëŠ” ê²Œì‹œê¸€ì˜ íƒ€ì…ì´Â `Post`Â í•˜ë‚˜ë°–ì— ì—†ì—ˆê³ , ì´ì— ë”°ë¼ ì´ë¥¼ ìœ„í•œÂ `Form`Â ì»´í¬ë„ŒíŠ¸ëŠ”Â `Post`ì˜ ë°ì´í„° íƒ€ì…ì— ì˜ì¡´ì ì´ì—ˆìŠµë‹ˆë‹¤.

ì½”ë“œë¡œ ì‚´í´ë³´ë©´,Â `Conext`ë¥¼ í†µí•´ Formì˜ ë°ì´í„°ì™€ ë°ì´í„°ë¥¼ í•¸ë“¤ë§ í•˜ëŠ” ë¡œì§ì„ ê° ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•˜ëŠ” í˜•íƒœì˜€ìŠµë‹ˆë‹¤.

```tsx title="Write.tsx"
const Write = () => {
  return (
    <WriteForm>
      <div>
        <div>
          <WriteForm.Title />
          <WriteForm.IsPublicCheckBox />
          <WriteForm.SubmitButton />
        </div>
        <div>
          <WriteForm.CategorySelector />
          <div>
            <WriteForm.TagInput />
            <WriteForm.TagList />
          </div>
        </div>
        <WriteForm.SeriesSelector />
        <WriteForm.ShortDescription />
        <WriteForm.Editor />
        <WriteForm.ThumbNailPicker />
      </div>
    </WriteForm>
  );
};
```

ê°ê°ì˜Â `WriteForm`Â ì˜ Compound Componentë“¤ì€Â `Context`ì—ì„œ ë°ì´í„°ì™€ ë°ì´í„°í•¸ë“¤ë§ í•¨ìˆ˜ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ëŠ” í˜•íƒœì…ë‹ˆë‹¤.

ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸Â `title`,Â `content`,Â `category`, â€¦ ë¼ëŠ”Â <u>ë°ì´í„°ì˜ key</u>ì— ì˜ì¡´ì ì¸ í˜•íƒœì…ë‹ˆë‹¤.

```tsx title="TitleInput.tsx"
const TitleInput = () => {
  const {
    writeFormData: { title },
    handleChangeTitle,
  } = useWriteContext();

  return (
    <input
      className={styles.titleInput}
      value={title}
      placeholder="ì œëª©"
      onChange={handleChangeTitle}
    />
  );
};
```

```tsx title="Editor.tsx"
const Editor = () => {
  const {
    writeFormData: { content },
    handleChangeContent: onChange,
  } = useWriteContext();
  const QuillRef = useRef<ReactQuill>(null);

  // ...
  return (
    <QuillNoSSRWrapper
      forwardedRef={QuillRef}
      value={content}
      onChange={onChange}
      modules={modules}
      formats={formats}
      theme="snow"
    />
  );
};
```

ì´í›„,Â `Snippet`ì´ë¼ëŠ” ìƒˆë¡œìš´ í˜•íƒœê°€ ìƒê¸°ê²Œ ë˜ì—ˆê³ , í•´ë‹¹Â `Snippet`ì˜ ë°ì´í„° êµ¬ì¡°ëŠ”Â `Post`ì˜ ë°ì´í„° êµ¬ì¡°ì™€ëŠ” ë‹¬ëìŠµë‹ˆë‹¤. (`SnippetType`ì€Â `PostType`ì—ì„œ ì¼ë¶€ íƒ€ì…ì„ ê°€ì ¸ì˜¨ í˜•íƒœ)

## Post Type

```tsx
interface PostType {
  category: string;
  createdAt: Date;
  id: number;
  title: string;
  Tags: Array<TagType>;
  thumbNailUrl: string | null;
  views: number;
  isPublic: number;
  shortDescription: string;
  SeriesId: number | null;
  content: string;
  seriesPosts: { id: number; title: string }[];
  seriesTitle: string;
}

export interface PostFormTypeextends Omit<
    PostType,
    "id" | "createdAt" | "Tags" | "views" | "seriesPosts" | "seriesTitle"
  > {
  tagArr: string[];
}

```

## Snippet Type

```tsx
export type SnippetType = Pick<
  PostType,
  "id" | "title" | "category" | "content" | "createdAt"
>;
export type SnippetFormType = Omit<SnippetType, "createdAt" | "id">;
```

ì´ì— ë”°ë¼, ê²Œì‹œê¸€ ì‘ì„±ì„ ìœ„í•œÂ `Form`ì„ ì¬í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹Â `Form`ì˜Â `PostType`ì— ì˜ì¡´ì ì¸ ë¶€ë¶„ì„ ê°œì„ í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

<br />

# ğŸ› ï¸Â Contextë¡œ ë°ì´í„° ì£¼ì… ê·¸ë¦¬ê³  Generic

AS-IS êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ ë°ì´í„°ë¥¼Â `Provider`ì—ì„œ ì„ ì–¸í•˜ê³ , ë°ì´í„°ì™€ ë°ì´í„° í•¸ë“¤ë§ í•¨ìˆ˜ë¥¼Â `Context`ì—ì„œ ì œê³µí•˜ëŠ” í˜•íƒœì…ë‹ˆë‹¤.

```tsx title="AS-IS"
export const WriteFormProvider = ({ children }: { children: JSX.Element }) => {
  const [writeFormData, dispatch] = useReducer(reducer, initialState);

  const handleChangeTitle = (e: ChangeEvent<HTMLInputElement>) => {
    dispatch({ type: "editTitle", title: e.target.value });
  };

  const handleChangeSeries = (e: ChangeEvent<HTMLSelectElement>) => {
    dispatch({ type: "editSeries", SeriesId: Number(e.target.value) });
  };

  return (
    <WriteFormContext.Provider
      value={{
        writeFormData,
        handleChangeTitle,
        handleChangeCategory,
        handleChangeContent,
        addTag,
        removeTag,
        setThumbNailUrl,
        handleChangeIsPublic,
        handleChangeShortDescription,
        handleChangeSeries,
      }}
    >
      {children}
    </WriteFormContext.Provider>
  );
};
```

ë¬¸ì œê°€ ë˜ëŠ” ì§€ì ì€ ë°ì´í„°(ìƒíƒœ)ë¥¼ ì„ ì–¸í•˜ëŠ” ì˜ì—­ì´Â `Provider`ì— ìˆì–´ ë°ì´í„°ì™€ ë°ì´í„°ì— ëŒ€í•œ íƒ€ì…ì´ ê³ ì •ë˜ì–´ ë²„ë¦¬ëŠ” ì ê³¼ ë°ì´í„°ì˜ ê° ì˜ì—­(`writeFormData.stateKey`)ë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ê°€ ì¼ë°˜í™” ë˜ì–´ìˆì§€ ì•Šê³ , ê°ê° ë‚˜ë‰˜ì–´ì ¸ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. (`handleChangeTitle`,Â `handleChangeCategory`, â€¦,Â `handleChangeSeries`)

ì´ì— ë”°ë¼ì„œ, ê°€ì¥ ë¨¼ì €Â `Provider`ì—ì„œÂ <u>ë°ì´í„°(ìƒíƒœ)ë¥¼ ì„ ì–¸í•˜ëŠ” ì½”ë“œ</u>ë¥¼Â `Provider`Â ì™¸ë¶€ë¡œ ì´ê´€í•˜ê³ ,Â `Provider`ì—ì„œ ë°ì´í„°ì™€ ë°ì´í„°í•¸ë“¤ë§ì„ ìœ„í•œ í•¨ìˆ˜ë¥¼ ì£¼ì…ë°›ë„ë¡ ìˆ˜ì •í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.

```tsx
interface WriteFormProviderProps<T> {
  children: React.ReactNode;
  formData: T;
  setFormData: Dispatch<SetStateAction<T>>;
}

const WriteFormContext = createContext<Pick<
  WriteFormProviderProps<T>,
  "formData" | "setFormData"
> | null>(null);

export const WriteFormProvider = <T extends Record<string, any>>({
  children,
  formData,
  setFormData,
}: WriteFormProviderProps<T>) => {
  return (
    <WriteFormContext.Provider value={{ formData, setFormData }}>
      {children}
    </WriteFormContext.Provider>
  );
};
```

ì—¬ê¸°ì„œ ë¬¸ì œì ì€Â `WriteFormContext`ë¥¼ ë§Œë“œëŠ” ì‹œì (`createContext`ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì )ì—Â `WriteFormProvider`ì—ì„œ ë°›ì€Â `Generic Type(T)`ì„ ë„˜ê¸¸ ìˆ˜ ì—†ë‹¤ëŠ” ì ì´ì—ˆê³ , ì´ì— ë”°ë¼Â `Pick<WriteFormProviderProps<T>,"formData" | "setFormData">`Â ë¶€ë¶„ì—ì„œ íƒ€ì…ì— ëŒ€í•´ ë¹¨ê°„ì¤„ì´ ìƒê²¼ìŠµë‹ˆë‹¤.

í•´ë‹¹ ë¬¸ì œë¥¼ ì—†ì• ëŠ” ë°©ë²•ì€ ì´ 2ê°€ì§€ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

## 1ï¸âƒ£Â ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ í˜•íƒœ

ë¬¸ì œê°€ ë˜ì—ˆë˜ ë¶€ë¶„ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í•  ë•ŒÂ `Generic Type`ì„ ë„˜ê¸¸ ìˆ˜ ì—†ë‹¤ëŠ” ë¶€ë¶„ì´ì—ˆìŠµë‹ˆë‹¤.

ì´ì— ë”°ë¼ì„œ, ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ í˜•íƒœë¡œ ë§Œë“¤ì–´Â `Generic Type`ì„ ë„˜ê¸°ëŠ” ë°©ë²•ì„ ìƒê°í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```tsx
const WriteFormContext = (function <T>() {
  return createContext<Pick<
    WriteFormProviderProps<T>,
    "formData" | "setFormData"
  > | null>(null);
})();
```

ì´ëŸ°ì‹ìœ¼ë¡œÂ `WriteFormContext`ë¥¼ ë§Œë“¤ê²Œ ë  ê²½ìš°, íƒ€ì…ì— ëŒ€í•œ ë¹¨ê°„ì¤„ì´ ìƒê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, ë¬¸ì œëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë„˜ê²¨ë°›ì€Â `Generic Type`ì„ ì œëŒ€ë¡œ ì¸ì‹í•˜ì§€ ëª»í•´, ì‹¤ì œë¡œ í•´ë‹¹Â `Context`ë¥¼Â `useContext`ë¥¼ ì´ìš©í•´ ì‚¬ìš©í•  ê²½ìš°,Â `Provider`ë¡œ ë„˜ê¸´ ë°ì´í„°ì˜ íƒ€ì…ì„ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ì ì´ì—ˆìŠµë‹ˆë‹¤.

## 2ï¸âƒ£Â Contextë¥¼ Provider ë‚´ë¶€ì—ì„œ ë§Œë“¤ê¸°

`Provider`ì—ì„œ ì œê³µë°›ì€Â `Generic Type`ì„ ë„˜ê¸°ê¸° ìœ„í•´Â `Context`ë¥¼Â `Provider`ì•ˆì—ì„œ ë§Œë“œëŠ” ë°©ë²•ì„ ìƒê°í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```tsx
interface WriteFormProviderProps<T> {
  children: React.ReactNode;
  formData: T;
  setFormData: Dispatch<SetStateAction<T>>;
}

const createWriteFormContext = function <T>() {
  return createContext<Pick<
    WriteFormProviderProps<T>,
    "formData" | "setFormData"
  > | null>(null);
};

export const WriteFormProvider = <T extends Record<string, any>>({
  children,
  formData,
  setFormData,
}: WriteFormProviderProps<T>) => {
  const WriteFormContext = createWriteFormContext<T>(null);

  return (
    <WriteFormContext.Provider value={{ formData, setFormData }}>
      {children}
    </WriteFormContext.Provider>
  );
};

const useWriteFormContext = <T extends Record<string, any>>() => {
  const writeFormContext = createWriteFormContext<T>(null);
  const value = useContext(writeFormContext);

  if (!value) throw Error("WriteFormContext is Used Before Initialization");

  return value;
};
```

ì´ ë°©ë²• ì—­ì‹œ íƒ€ì… ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ê·¸ë ‡ì§€ë§Œ, ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ì—ì„œÂ `useWriteFormContext`ë¥¼ í†µí•´Â `Context`ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê²Œ ë  ê²½ìš°, ë§¤ë²ˆÂ `Context`ë¥¼ ìƒì„±í•˜ê²Œ ë˜ì–´ ì—ëŸ¬ê°€ ë°œìƒ í–ˆìŠµë‹ˆë‹¤.

<br />

# ğŸ› ï¸Â Without Context

`Context`ë¥¼ ì‚¬ìš©í•˜ê²Œ ë  ê²½ìš°, í•„ì—°ì ìœ¼ë¡œ íƒ€ì… í˜¹ì€Â `Context`ë¥¼ ì‚¬ìš©í•  ë•Œ, ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ì´ì— ë”°ë¼,Â `Context`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•ì„ ìƒê°í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ë¹„ìŠ·í•œ ìƒí™©ì—ì„œ ìœ ëª… ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ ì–´ë–¤ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆëŠ”ì§€ ì‚´í´ë³´ê¸° ìœ„í•´,Â `react-hook-form`Â ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì—´ì–´ì„œ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.

`react-hook-form`Â ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ”Â `context`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ê°ê°ì˜Â `element`ì— ì „ì²´ ë°ì´í„°ì˜ ê° keyë¥¼ ì£¼ì…í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

```tsx
import { useForm } from "react-hook-form";

export default function App() {
  const {
    register,
    handleSubmit,
    watch,
    formState: { errors },
  } = useForm();
  const onSubmit = (data) => console.log(data);

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input defaultValue="test" {...register("example")} />
      <input {...register("exampleRequired", { required: true })} />
      <input type="submit" />
    </form>
  );
}
```

í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¸ê³ í•˜ì—¬,Â `Context`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ê° ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ë¥¼Â `Props`ë¥¼ í†µí•´ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì€ ìì‹ ì´ ë³€ê²½í•´ì•¼ í• Â `key`ë¥¼ ì£¼ì…ë°›ê³ , ì „ì²´ ë°ì´í„°ì—ì„œ í•´ë‹¹ ë°ì´í„°ì˜Â `key`ë¥¼ ë³€ê²½í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.

```tsx
<PostForm.TextInput
  stateKey="title"
  value={formState.title}
  setState={setFormState}
  label="ì œëª©"
/>;

type Props<T> = Omit<HTMLAttributes<HTMLInputElement>, "onChange"> &
  PostFormItemSharedType<T>;

const TextInput = <T extends Record<string, any>>({
  setState,
  stateKey,
  value,
  ...props
}: Props<T>) => {
  const handleChangeTextInput = (e: ChangeEvent<HTMLInputElement>) => {
    setState((prev) => {
      return {
        ...prev,
        [stateKey]: e.target.value,
      };
    });
  };

  return (
    <div>
      <input onChange={handleChangeTextInput} value={value} {...props} />
    </div>
  );
};
```

<br />

# ğŸ› ï¸Â FormItem ì¼ë°˜í™”

AS-IS êµ¬ì¡°ì—ì„œëŠ” ê°ê°ì˜Â `Compound`Â ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë°ì´í„°ì˜ key(title, category, content, â€¦.)ì— ê°•í•˜ê²Œ ê²°í•©ë˜ì–´ ìˆì–´ ì¬í™œìš© í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, ë°ì´í„°ì˜ keyì™€ ë°ì´í„°ë¥¼ setting í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ë„ë¡ ìˆ˜ì •í–ˆìœ¼ë©°, ì¢€ ë” generalí•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

í…ìŠ¤íŠ¸ í˜•íƒœì˜ ë°ì´í„° ì…ë ¥ ì„ ìœ„í•œÂ `TextInput`Â ì»´í¬ë„ŒíŠ¸

```tsx title="TextInput.tsx"
type Props<T> = Omit<React.HTMLAttributes<HTMLInputElement>, "onChange"> &
  PostFormItemSharedType<T>;

const TextInput = <T extends Record<string, any>>({
  setState,
  stateKey,
  value,
  label,
  ...props
}: Props<T>) => {
  const handleChangeTextInput = (e: React.ChangeEvent<HTMLInputElement>) => {
    setState((prev) => {
      return {
        ...prev,
        [stateKey]: e.target.value,
      };
    });
  };

  return (
    <div className={styles.DivWithLabel}>
      {label && <label>{label}</label>}
      <input
        className={styles.TextInput}
        onChange={handleChangeTextInput}
        value={value}
        {...props}
      />
    </div>
  );
};

export default TextInput;
```

ì—¬ëŸ¬ ì˜µì…˜ ì¤‘ íŠ¹ì • ì˜µì…˜ì„ ì„ íƒí•˜ê¸° ìœ„í•œÂ `Selector`Â ì»´í¬ë„ŒíŠ¸

```tsx title="Selector.tsx"
interface Props<T>
  extends Omit<React.HTMLAttributes<HTMLSelectElement>, "onChange">,
    PostFormItemSharedType<T> {
  options: {
    key: string | number;
    value: string | number;
    text: string | number;
  }[];
  valueConverter?: (value: string) => number | boolean | string;
}

const Selector = <T extends Record<string, any>>({
  setState,
  stateKey,
  value,
  className,
  options,
  label,
  valueConverter = (value: string) => value,
  ...props
}: Props<T>) => {
  const handleChangeSelector = (e: React.ChangeEvent<HTMLSelectElement>) => {
    setState((prev) => {
      return {
        ...prev,
        [stateKey]: valueConverter(e.target.value),
      };
    });
  };

  return (
    <div className={styles.DivWithLabel}>
      {label && <label>{label}</label>}
      <select
        value={value}
        onChange={handleChangeSelector}
        className={styles.Selector}
        {...props}
      >
        <option disabled selected>
          â†’ select an option â†
        </option>
        {options.map(({ text, key, value }) => (
          <option key={key} value={value}>
            {text}
          </option>
        ))}
      </select>
    </div>
  );
};

export default Selector;
```

ì´ ì™¸ì— ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ì€Â [https://github.com/BY-juun/Blog/tree/master/client/components/postForm/FormItem](https://github.com/BY-juun/Blog/tree/master/client/components/postForm/FormItem)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br />

<br />

# ğŸ› ï¸Â ê´€ë ¨ ë¡œì§ê³¼ ë°ì´í„°ë¥¼ Hook ìœ¼ë¡œ ë­‰ì¹˜ê¸°

ë§ˆì§€ë§‰ìœ¼ë¡œ ê´€ë ¨ ë¡œì§ê³¼ ë°ì´í„°ë¥¼Â `Hook`ìœ¼ë¡œ ë­‰ì¹˜ëŠ” ì‘ì—…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ì—Â `props`ë¥¼ ë„˜ê¸°ëŠ” ë°©ì‹ì„ ê°„ì†Œí™”í•˜ê³ , ìˆ˜ì •ìƒíƒœì¼ ê²½ìš°, ê¸°ì¡´ ë°ì´í„°ì™€ ë™ê¸°í™”í•˜ëŠ” ë¡œì§ê³¼ ì…ë ¥ ì—¬ë¶€ validation ë¡œì§ì„Â `Hook`ìœ¼ë¡œ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤.

```tsx title="usePostForm.ts"
interface Params<T> extends Pick<PostFormItemSharedType<T>, "setState"> {
  state: T;
}

const createFormItemProps = <T extends Record<string, any>>({
  state,
  setState,
}: Params<T>): ((
  stateKey: PostFormItemSharedType<T>["stateKey"]
) => PostFormItemSharedType<T>) => {
  return function (stateKey) {
    return {
      stateKey,
      value: state[stateKey],
      setState,
    };
  };
};

const usePostForm = <T extends Record<string, any>>(initialState: T) => {
  const [formState, setFormState] = useState(initialState);

  const formItemProps = createFormItemProps({
    state: formState,
    setState: setFormState,
  });

  const syncFormDataAndState = useCallback((data: T) => {
    setFormState(data);
  }, []);

  const verifyAllKeysInFormStateEntered = useCallback(() => {
    const formDataKeys = Object.keys(formState) as (keyof typeof formState)[];

    for (const key of formDataKeys) {
      if (!formState[key]) return key;
    }

    return false;
  }, [formState]);

  return {
    formItemProps,
    formState,
    setFormState,
    syncFormDataAndState,
    verifyAllKeysInFormStateEntered,
  };
};
```

ê²°ê³¼ì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ í›¨ì”¬ ì½ê¸° ì‰½ê³  ì–´ë– í•œ ë°ì´í„°ì˜ í˜•íƒœì—ë„ ìœ ì—°í•˜ê²Œ ì‚¬ìš©ê°€ëŠ¥í•œ Form ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

```tsx
const SnippetWritePage = () => {
  const {
    formState,
    formItemProps,
    syncFormDataAndState,
    verifyAllKeysInFormStateEntered,
  } = usePostForm<SnippetFormType>(snippetFormInitialData);

  const handleSubmitSnippet = () => {
    const notEnteredKey = verifyAllKeysInFormStateEntered();
    if (notEnteredKey) return toast.warn(`${notEnteredKey}ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
  };

  useEffect(() => {
    if (!data) return;
    syncFormDataAndState({ ...omit(data, "id", "createdAt") });
  }, [data, syncFormDataAndState]);

  return (
    <PostForm>
      <PostForm.SubmitButton handleSubmit={handleSubmitSnippet} />
      <PostForm.TextInput {...formItemProps("title")} label="ì œëª©" />
      <PostForm.Selector
        {...formItemProps("category")}
        label="ì¹´í…Œê³ ë¦¬"
        options={SnippetsCategory.map((category) => {
          return { key: category, value: category, text: category };
        })}
      />
      <PostForm.Editor {...formItemProps("content")} />
    </PostForm>
  );
};
```

[https://github.com/BY-juun/Blog/blob/master/client/pages/snippets/write.tsx](https://github.com/BY-juun/Blog/blob/master/client/pages/snippets/write.tsx)
