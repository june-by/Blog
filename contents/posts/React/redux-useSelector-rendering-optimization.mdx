---
title: "Redux useSelector ë¦¬ë Œë”ë§ ìµœì í™”"
date: "2022-11-29"
lastmod: "2022-11-29"
category: "React"
tags: ["redux"]
series: "Frontend ì„±ëŠ¥ ìµœì í™”"
description: "reduxì—ì„œ ì œê³µí•˜ëŠ” useSelectorë¥¼ ì´ìš©í•˜ë©° ë°œìƒí•œ ë¦¬ë Œë”ë§ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤."
thumbNail: "https://github.com/BY-juun/Blog/assets/78716842/f1ea16ea-5f7b-453e-9a68-f9b1dd03da4e"
---

# ğŸŒƒÂ ë°°ê²½

<img src="https://github.com/BY-juun/Blog/assets/78716842/d1a877d4-e8fb-4aa5-b6f9-0f1b87973fec"/>

ì˜ìƒì— ë‚˜ì˜¤ëŠ” `ScheduleFanUp` ëª¨ë‹¬ì„ ì—´ê³  ë‹«ì„ ë•Œ, í•´ë‹¹Â `ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸`(`ScheduleFanUpModal` ì»´í¬ë„ŒíŠ¸)ë§Œ ë Œë”ë§ë˜ê¸°ë¥¼ ì›í–ˆì§€ë§Œ, ëª¨ë‹¬ì„ ê°ì‹¸ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸(`Calendar`Â ì»´í¬ë„ŒíŠ¸)ê¹Œì§€ í•¨ê»˜ ë¦¬ë Œë”ë§ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì•˜ìŠµë‹ˆë‹¤.

```tsx title="Calendar.tsx"
const Calendar = () => {
  const { openSchduleModal } = useSelector<ReducerType, ArtistStore>(
    (state) => state.artistSlice
  );

  return (
    <CalendarWrapper>
      <h1 data-testid="title">LILHUDDYë‹˜ì˜ ì¼ì •</h1>
      <CalendarHeader />
      <CalendarBody />
      {openSchduleModal ? <ScheduleFanUpModal /> : null}
    </CalendarWrapper>
  );
};
```

<br />

# open ìƒíƒœë¥¼ ë‚´ë¶€ë¡œ

ìœ„ ë¬¸ì œì˜ ê²½ìš°ì—ëŠ”,Â `Calendar`Â ì»´í¬ë„ŒíŠ¸ê°€Â `Redux Store`ì˜Â `openSchduleModal`Â ìƒíƒœë¥¼ êµ¬ë…í•˜ê³  ìˆì–´, ì—´ê³  ë‹«ì„ ë•Œ ë Œë”ë§ì´ ë°œìƒë˜ëŠ” ìƒí™©ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ,Â `openSchduleModal`Â ìƒíƒœë¥¼ ì´ìš©í•´,Â `ScheduleFanUpModal`Â ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ë¡œì§ì„Â `ScheduleFanUpModal`Â ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ë¡œ ì´ë™ì‹œì¼œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

```tsx title="Calendar.tsx"
const Calendar = () => {
  return (
    <CalendarWrapper>
      <h1 data-testid="title">LILHUDDYë‹˜ì˜ ì¼ì •</h1>
      <CalendarHeader />
      <CalendarBody />
      <ScheduleFanUpModal />
    </CalendarWrapper>
  );
};
```

```tsx title="ScheduleFanUpModal.tsx"
const ScheduleFanUpModal = () => {
  const { openSchduleModal } = useSelector<ReducerType, ArtistStore>(
    (state) => state.artistSlice
  );

  if (!openSchduleModal) return null;
  return <>...</>;
};
```

<br />

# useSelector ìµœì í™”

ë‹¤ìŒìœ¼ë¡œ ë°œìƒí•œ ë¬¸ì œëŠ” ëª¨ë‹¬ì„ ì—´ê³  ë‹«ì„ ë•Œ, `CalendarHeader`ì™€ `CalendarBody` ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ëœë”ë§ëœë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

<img src="https://github.com/BY-juun/Blog/assets/78716842/500c34e9-647f-4734-9cd5-f46de75bfa0e"/>

`CalendarHeader` ì»´í¬ë„ŒíŠ¸ì™€ `CalendarBody` ì»´í¬ë„ŒíŠ¸ì˜ ì½”ë“œëŠ” ëª¨ë‘ `Redux Store`ë¥¼ êµ¬ë…í•˜ê³  ìˆìŠµë‹ˆë‹¤.

```tsx title="CalendarHeader.tsx"
const CalendarHeader = () => {
  const { calendarYear: year, calendarMonth: month } = useSelector<
    ReducerType,
    ArtistStore
  >((state) => state.artistSlice);

  console.log("calendarHeader Render");
  return <>...</>;
};
```

```tsx title="CalendarBody.tsx"
const CalendarBody = () => {
  const { calendarYear: year, calendarMonth: month } = useSelector<
    ReducerType,
    ArtistStore
  >((state) => state.artistSlice);

  console.log("CalendarBody Render");
  return <>...</>;
};
```

`react-redux` ê³µì‹ë¬¸ì–´ì„¸ ë”°ë¥´ë©´, `useSelector`ë¥¼ ì´ìš©í•´ `Redux Store`ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” `useSelector`ì˜ ì¸ìë¡œ ë°›ëŠ” `selector` í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” ê°’ì˜ ë³€í™” ì—¬ë¶€ì— ë”°ë¼, ë¦¬ë Œë”ë§ ëœë‹¤ê³  í•©ë‹ˆë‹¤. (<a href="https://react-redux.js.org/api/hooks#equality-comparisons-and-updates">ê³µì‹ë¬¸ì„œ</a>)

`CalendarHeader`ì™€ `CalendarBody`ì—ì„œëŠ” ëª¨ë‘ artistSliceì—ì„œ ê´€ë¦¬í•˜ëŠ” state ì „ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” selectorë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

```tsx
const { calendarYear: year, calendarMonth: month } = useSelector<
  ReducerType,
  StoreState
>((state) => state.artistSlice);
```

`redux`ì—ì„œëŠ” ë¶ˆë³€ì„±ì„ ìœ„í•´ ë§¤ë²ˆ ìƒˆë¡œìš´ `state`ë¥¼ ë§Œë“¤ê³ , ì´ë¡œ ì¸í•´ `state` ì „ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” `selector`ëŠ” í•­ìƒ ë°˜í™˜ê°’ì´ ì´ì „ê³¼ ë‹¬ë¼ ë¦¬ë Œë”ë§ì´ ë°œìƒí–ˆì—ˆìŠµë‹ˆë‹¤.

ì´ëŠ” 2ê°€ì§€ì˜ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. ê°ì²´ê°€ ì•„ë‹Œ ìƒíƒœë¥¼ ì§ì ‘ë°˜í™˜
2. `equalityFn` í™œìš©

1ë²ˆì„ ì´ìš©í•œë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ê°ê° ê°œë³„ì˜ ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼í•©ë‹ˆë‹¤.

```tsx
const calendarYear = useSelector<ReducerType, number>(
  (state) => state.artistSlice.calendarYear
);
const calendarMonth = useSelector<ReducerType, number>(
  (state) => state.artistSlice.calendarMonth
);
```

ì´ë ‡ê²Œë„ ë¬¸ì œê°€ í•´ê²°ë˜ì§€ë§Œ, í•˜ë‚˜ì˜ `useSelector`ì—ì„œ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì½”ë“œì˜ ì–‘ì„ ì¤„ì´ê³  ê°€ë…ì„±ì„ í–¥ìƒì‹œí‚¤ê¸° ë•Œë¬¸ì—, 2ë²ˆ ë°©ë²•ì„ ì ìš©í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

`useSelector` ëŠ” ë‘ ë²ˆì§¸, ë§¤ê²Œë³€ìˆ˜ë¡œ `equalifyFn`ì„ ë°›ìŠµë‹ˆë‹¤.  
`equalifyFn` ì´ì „ ìƒíƒœì™€ í˜„ì¬ ìƒíƒœë¥¼ ë¹„êµí•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
<a href="https://react-redux.js.org/api/hooks#useselector">ê³µì‹ë¬¸ì„œ</a>

ì´ë¥¼ ì´ìš©í•˜ë©´, `useSelector`ë¥¼ í•œë²ˆë§Œ ì´ìš©í•´ì„œ, ê°ì²´ë¥¼ ë°˜í™˜ ë°›ì„ ìˆ˜ ìˆë‹¤.
`react-redux`ì—ì„œëŠ” `shallowEqual` ì´ë¼ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•˜ê³ , ì´ ë©”ì„œë“œëŠ” ê°ì²´ ì•ˆì˜ ê°€ì¥ ê²‰ì— ìˆëŠ” ê°’ë“¤ì„ ëª¨ë‘ ë¹„êµí•´ì¤ë‹ˆë‹¤.

```tsx
const { calendarYear: year, calendarMonth: month } = useSelector<
  ReducerType,
  StoreState
>(
  ({ artistSlice }) => ({
    calendarYear: artistSlice.calendarYear,
    calendarMonth: artistSlice.calendarMonth,
  }),
  shallowEqual
);
```

ê²°ê³¼ì ìœ¼ë¡œ ëª©í‘œì˜€ë˜ ëª¨ë‹¬ì´ ì—´ê³  ë‹«íˆë”ë¼ë„ Calendar ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ì§€ ì•Šë„ë¡ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
<img src="https://github.com/BY-juun/Blog/assets/78716842/b5440c68-1de7-4a24-a286-83a5db16aa9e"/>
