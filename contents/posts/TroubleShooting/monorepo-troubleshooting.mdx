---
title: "ëª¨ë…¸ë ˆí¬ ì„¸íŒ… Trouble Shooting (feat. babel)"
date: "2023-06-03"
lastmod: "2023-06-03"
category: "TroubleShooting"
tags: ["monorepo", "babel"]
description: "ëª¨ë…¸ë ˆí¬ ì ìš© ê³¼ì •ì—ì„œ í”„ë¡œì íŠ¸ ì „ì²´ì— ë™ì¼í•œ Babel ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë‚´ìš©ì„ ë‹¤ë£¬ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤."
thumbNail: "https://github.com/BY-juun/Blog/assets/78716842/51d4974e-ac53-4ad3-999e-135ec842d2d2"
---

<div align="right">
  [![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fdevlog-juneby.vercel.app%2Fposts%2FTroubleShooting%2Fmonorepo-troubleshooting&count_bg=%233B82F6&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=views&edge_flat=false)](https://hits.seeyoufarm.com)
</div>

# ğŸŒ„ ë°°ê²½

ìµœê·¼ ì§„í–‰í•œ í”„ë¡œì íŠ¸ì—ì„œÂ `ëª¨ë…¸ë ˆí¬`ë¥¼ ì ìš© í•  ë•ŒÂ `TypeScript`ë¥¼Â `ES5`ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

êµ¬ì²´ì ìœ¼ë¡œ, ê¸°ì¡´ì— ì„¸íŒ…ë˜ì–´ ìˆëŠ” ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ì˜ ì„¤ì •ê³¼ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ë™ì¼í•˜ê²Œ ì‹ ê·œ ëª¨ë…¸ë ˆí¬ ì„¸íŒ… í”„ë¡œì íŠ¸ì— ì ìš©í•˜ê³ ì í–ˆì§€ë§Œ, ë¹Œë“œì— ì‹¤íŒ¨í•˜ëŠ” ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤.

ê¸°ì¡´ í”„ë¡œì íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ì´ ëª¨ë…¸ë ˆí¬ì˜Â `ë£¨íŠ¸ ë””ë ‰í† ë¦¬`ì—Â `Babel`Â ì„¤ì •íŒŒì¼ í•˜ë‚˜ë§Œì„ ê°€ì§€ê³  ìˆëŠ” ìƒíƒœì˜€ìŠµë‹ˆë‹¤. â†’Â `.babelrc`

```text title="ê¸°ì¡´í”„ë¡œì íŠ¸ í´ë”êµ¬ì¡°"
ê¸°ì¡´í”„ë¡œì íŠ¸
â”œâ”€ tsconfig.base.json
â”œâ”€ package.json
â”œâ”€ pnpm-lock.yaml
â”œâ”€ pnpm-workspace.yaml
â”œâ”€ node_modules
â”œâ”€ webpack
â”œâ”€ .babelrc
â””â”€ packages
  â””â”€ sub-package1
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â””â”€ src
  â””â”€ sub-package2
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â””â”€ src
  â””â”€ sub-package3
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â””â”€ src
```

ì‹ ê·œ ëª¨ë…¸ë ˆí¬ ì„¸íŒ… í”„ë¡œì íŠ¸ ì—­ì‹œ, ìœ„ì™€ ê°™ì€ êµ¬ì¡°ë¡œ ê°Â `package`ë§ˆë‹¤Â `babel`Â ì„¤ì •íŒŒì¼ì„ ë§Œë“¤ì§€ ì•Šê³ Â `ë£¨íŠ¸`ì— ì¡´ì¬í•˜ëŠ”Â `babel`Â ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“¤ê³  ì‹¶ì—ˆì§€ë§Œ, ì •ìƒ ë™ì‘í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

<br />

# ğŸ¤” why?

ì°¨ì´ì ì„ í™•ì¸í•´ë³´ë‹ˆ, ê¸°ì¡´ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ëŠ”Â `ts-loader`ë¥¼ ì´ìš©í•´,Â `TypeScript`ë¥¼Â `ES5`ë¡œ ë³€í™˜í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤

```json title="tsconfig.json"
{
  "compilerOptions": {
    "target": "es5"
  }
}
```

ê·¸ë¦¬ê³ , ì‹ ê·œ ëª¨ë…¸ë ˆí¬ ì„¸íŒ… í”„ë¡œì íŠ¸ëŠ”Â `ts-loader`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ,Â `babel`ì„ ì´ìš©í•´,Â `TypeScript`ë¥¼Â `ES5`ë¡œ ë³€í™˜í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

ê·¸ë¦¼ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

<img src="https://github.com/BY-juun/Blog/assets/78716842/b90cc7ff-e5bc-4d55-a714-71f51436468f" />

<br />

ê¸°ì¡´ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ëŠ”Â `TS â†’ ES6 â†’ ES5`Â ë³€í™˜ ê³¼ì •ì— ìˆì–´Â `ts-loader`ë¥¼ ì‚¬ìš©í–ˆê³ ,Â `ts-loader`ë¥¼ í†µí•´Â `es5`ë¡œ ë³€í™˜ëœ ì´í›„Â `babel`ì„ ì´ìš©í•´Â `transpile`Â ë˜ì—ˆê¸° ë•Œë¬¸ì—, ì§ì ‘ ì‘ì„±í•œÂ `babel`Â ì„¤ì •íŒŒì¼ì´ ë”°ë¡œ ì—†ë”ë¼ë„ (`default`ë¡œ ë‚´ë¶€ ì„¤ì • ì‚¬ìš©í•¨) ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

<img src="https://github.com/BY-juun/Blog/assets/78716842/7c9b1289-474d-4930-9d5a-93e869874fd1" />

ìš”ì•½í•˜ìë©´, ê¸°ì¡´ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ëŠ” ë£¨íŠ¸ì—Â `Babel`Â ì„¤ì •íŒŒì¼(`.babelrc`)ê°€ ì¡´ì¬í–ˆì§€ë§Œ, ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆë˜ ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, ì‹ ê·œ ì„¸íŒ… í”„ë¡œì íŠ¸ëŠ”Â `TS â†’ ES6 â†’ ES5`Â ë³€í™˜ ê³¼ì •ì— ìˆì–´Â `babel`ì„ ì‚¬ìš©í–ˆê³  ì´ì—ë”°ë¼Â `babel`Â ì„¤ì •ì´ ê¼­ í•„ìš”í•´, ê°Â `sub-package`ì—Â `Babel`Â ì„¤ì • íŒŒì¼ì´ ì—†ë‹¤ë©´ ì‹¤í–‰ì´ ë˜ì§€ ì•Šì•˜ë˜ ê²ƒì…ë‹ˆë‹¤.

```text title="ì‹ ê·œí”„ë¡œì íŠ¸ í´ë”êµ¬ì¡°" {14,20,26}
ì‹ ê·œí”„ë¡œì íŠ¸
â”œâ”€ tsconfig.base.json
â”œâ”€ package.json
â”œâ”€ pnpm-lock.yaml
â”œâ”€ pnpm-workspace.yaml
â”œâ”€ node_modules
â”œâ”€ webpack
â”œâ”€ .babelrc
â””â”€ packages
  â””â”€ sub-package1
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â”œâ”€ .babelrc
     â””â”€ src
  â””â”€ sub-package2
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â”œâ”€ .babelrc
     â””â”€ src
  â””â”€ sub-package3
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â”œâ”€ .babelrc
     â””â”€ src

```

# ğŸ›  ê° Packageì˜ Babel ì„¤ì • íŒŒì¼ì—ì„œ ë£¨íŠ¸ Babel ì„¤ì •ì„ ê°€ì ¸ì˜¤ê¸°

[Babel ê³µì‹ë¬¸ì„œì—ì„œ 6ë²„ì „ê³¼ 7ë²„ì „ì„ ë¹„êµí•œ ë‚´ìš©](https://babeljs.io/docs/config-files#6x-vs-7x-babelrc-loading)ì¤‘ì— ë‹¤ìŒê³¼ ê°™ì€ ì´ì•¼ê¸°ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

ëª¨ë…¸ë ˆí¬ë¥¼ ì‚¬ìš©í•  ë•Œ ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤.

```text
.babelrc
packages/
  mod1/
    package.json
    src/index.js
  mod2/
    package.json
    src/index.js

```

`package boundary`ì— ì˜í•´ ì„¤ì •ì´ ë¬´ì‹œ ë  ê²ƒì´ë‹¤.

í•œ ê°€ì§€ ë°©ë²•ì€ ê°Â `sub-package`ì—Â `.babelrc`íŒŒì¼ì„ ë§Œë“¤ê³ ,Â `"extends"`Â ë¥¼ ì´ìš©í•´, ì„¤ì • íŒŒì¼ì„ í™•ì¥í•˜ëŠ” ê²ƒì´ë‹¤.

```javascript title=".babelrc"
{ "extends": "../../.babelrc" }
```

í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ìƒí™©ê³¼ ì •í™•íˆ ì¼ì¹˜ í–ˆê¸° ë•Œë¬¸ì—, 1ì°¨ì ìœ¼ë¡œ í•´ë‹¹ ë°©ë²•ì„ í†µí•´ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

<br />

# ğŸ§ ë£¨íŠ¸ì— ìˆëŠ” Babel ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ê¹Œ?

ê°Â `sub-package`ì—Â `babel`Â ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ê³ ,Â `"extends"`ë¥¼ í†µí•´ ì„¤ì •ì„ ê°€ì ¸ì˜¤ëŠ” ë°©ë²• ì—­ì‹œ í•´ê²°ì´ ê°€ëŠ¥í–ˆì§€ë§Œ,Â `sub-package`ë¥¼ ë§Œë“¤ë•Œë§ˆë‹¤,Â `babel`Â ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•˜ëŠ” ë¶ˆí¸í•œì ì´ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤.

ì´ì— ë”°ë¼, ìµœì¢…ì ì¸ ëª©í‘œëŠ” ëª¨ë…¸ë ˆí¬ì— ì¡´ì¬í•˜ëŠ” ê°Â `sub-package`ê°€ ë£¨íŠ¸ì— ìˆëŠ”Â `babel`ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

`babel`ì´Â `transpile`ì„ ìˆ˜í–‰í•  ë•ŒëŠ”Â `working directory`ë¼ëŠ” ê°œë…ì´ ì¡´ì¬í•˜ê³ ,Â `working directory`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì • íŒŒì¼ì„ ì°¾ê²Œ ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ, ë£¨íŠ¸ì—Â `babel`Â ì„¤ì •íŒŒì¼ì´ ì¡´ì¬í•˜ë”ë¼ë„, ê°Â `sub-package`ì—ì„œÂ `transpile`ì„ ì‹¤í–‰í•  ë•Œ, ë£¨íŠ¸ì˜Â `babel`ì„¤ì • íŒŒì¼ì„ ì°¾ì•„ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë˜ ê²ƒ ì…ë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”Â `"rootMode"`Â ì˜µì…˜ì„Â `"upward"`ë¡œ ì„¤ì •í•´,Â `Babel`ì´Â `working directory`ì—ì„œ ìœ„ìª½ìœ¼ë¡œÂ `babel.config.json`Â íŒŒì¼ì„ ì°¾ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤.

[ê³µì‹ë¬¸ì„œ - Root babel.config.json file](https://babeljs.io/docs/config-files#6x-vs-7x-babelrc-loading)

[ê³µì‹ë¬¸ì„œ](https://babeljs.io/docs/options#rootmode)ì— ë‚˜ì™€ìˆëŠ”Â `"rootMode"`ì— ëŒ€í•œ ì„¤ëª…ì„ ì½ì–´ë³´ë‹ˆ,Â `"upward"`ë¡œ ì„¤ì •í•  ê²½ìš°,Â `"root(working directory)"`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìœ„ë¡œ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€Â `babel.config.json`íŒŒì¼ì„ ì°¾ê³ , ì—†ë‹¤ë©´Â `babel.config.json`Â íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì—ëŸ¬ë¥¼ ë˜ì§„ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. (`babel.config.json`ì„ ì œì™¸í•œÂ `.babelrc`Â /Â `.babelrc.json`Â ë¶ˆê°€)

ìµœì¢…ì ìœ¼ë¡œ ë£¨íŠ¸ì— ì¡´ì¬í•˜ëŠ”Â `babel`Â ì„¤ì • íŒŒì¼ì˜ ë„¤ì´ë°ì„Â `babel.config.json`ìœ¼ë¡œ ë³€ê²½ í›„,Â `babel`ì˜Â `rootMode`Â ì„¤ì •ì„Â `upward`ë¡œ ë°”ê¿”ì£¼ì–´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

```text title="ì‹ ê·œí”„ë¡œì íŠ¸ í´ë”êµ¬ì¡°" {8}
ì‹ ê·œí”„ë¡œì íŠ¸
â”œâ”€ tsconfig.base.json
â”œâ”€ package.json
â”œâ”€ pnpm-lock.yaml
â”œâ”€ pnpm-workspace.yaml
â”œâ”€ node_modules
â”œâ”€ webpack
â”œâ”€ babel.config.json
â””â”€ packages
  â””â”€ sub-package1
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â””â”€ src
  â””â”€ sub-package2
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â””â”€ src
  â””â”€ sub-package3
     â”œâ”€ webpack
     â”œâ”€ package.json
     â”œâ”€ tsconfig.json
     â””â”€ src

```

`webpack.config.js`ì˜Â `babel-loader`Â ì„¤ì • ë¶€ë¶„

```javascript title="webpack.config.js"
modules : {
  rules : [
    test : /\.(js|tsx|ts)$/,
    exclude : [/node_modules/],
    loader : 'babel-loader',
    options : {
      rootMode : 'upward',
    }
  ]
}
```
