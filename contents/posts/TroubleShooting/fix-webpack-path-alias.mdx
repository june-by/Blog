---
title: "Jotai IE Issue í•´ê²°í•˜ê¸°"
date: "2023-06-14"
lastmod: "2023-06-14"
category: "TroubleShooting"
tags: ["jotai", "webpack", "cjs", "esm"]
description: "í”„ë¡œì íŠ¸ì— Jotai ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•œ IE ë°±í™”í˜„ìƒì— ëŒ€í•´ í•´ê²°í•œ ê³¼ì •ì„ ë‹¤ë£¬ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤."
thumbNail: "https://github.com/BY-juun/Blog/assets/78716842/14effe6e-417b-47ab-bbbd-3841aa4bef22"
---

<div align="right">
  [![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fdevlog-juneby.vercel.app%2Fposts%2FTroubleShooting%2Ffix-webpack-path-alias&count_bg=%233B82F6&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=views&edge_flat=false)](https://hits.seeyoufarm.com)
</div>

# ğŸŒƒÂ ë°°ê²½

ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ë§‰ê¸° ìœ„í•´,Â Context APIë¡œ ê´€ë¦¬ë˜ê³  ìˆë˜ ìƒíƒœê´€ë¦¬ë¥¼Â Jotaië¡œ ì „í™˜í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´ ê³¼ì •ì—ì„œ, ì„œë¹„ìŠ¤ì˜ íŠ¹ì„± ìƒÂ IE(Internet Explorer)ë¥¼ ì§€ì›í•´ì•¼ í–ˆì§€ë§Œ,Â `Jotai`ë¡œ ì „í™˜ ì‘ì—… í›„ í™•ì¸í•´ë³´ë‹ˆÂ `IE`ì—ì„œ ì •ìƒë™ì‘ í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

IEí™˜ê²½ì— ì ‘ì† ì´í›„ ê°œë°œì ë„êµ¬ íƒ­ì„ í†µí•´ ì½˜ì†”ì°½ì„ í™•ì¸í•´ë³´ë‹ˆ, `Jotai`ê°€ ë‚´ë¶€ì ìœ¼ë¡œÂ `Set`,Â `Map`,Â `WeakMap`,Â `Arrow Function`Â ë“± êµ¬í˜• ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¬¸ë²•ì„ ì‚¬ìš©í•´ ë°œìƒí•œ ë¬¸ì œë¼ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

ì´ì— ë”°ë¼, í”„ë¡œì íŠ¸ ë¹Œë“œ ê³¼ì •ì—Â node_modulesÂ ë‚´ë¶€ì— ìˆëŠ”Â `Jotai`ë¥¼ í¬í•¨ì‹œì¼œ, í•¨ê»˜Â **Bundling + Transpiling**Â ë˜ë„ë¡ ë§Œë“œëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²°í•˜ê³ ì í–ˆìŠµë‹ˆë‹¤. â†’Â <a href="https://tech.kakao.com/2020/12/01/frontend-growth-02/">ì°¸ê³ ìë£Œ</a>

ì´ ê³¼ì •ì—ì„œ ì•„ë˜Â `Jotai` Github Repositoryì—ì„œ íŠ¹ì •Â ISSUEì™€Â Commentë¥¼ í†µí•´Â `Jotai`ì—ì„œÂ `CJS`íŒŒì¼ì„ ì§€ì›í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆê³ , ì „í™˜ì‘ì—…ì„ ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œëŠ”Â `Jotai`ì—ì„œ ì œê³µí•˜ëŠ”Â `CJS`Â íŒŒì¼ì´ ì•„ë‹ŒÂ `ESM`Â íŒŒì¼ì„ ê°€ì ¸ì™€ ë¹Œë“œë¥¼ í•˜ê²Œ ë˜ì–´Â `IE`ì—ì„œ ì •ìƒë™ì‘ í•˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ì˜ˆì¸¡í–ˆìŠµë‹ˆë‹¤.

ISSUE and Comment â†’ <a href="https://github.com/pmndrs/jotai/issues/265#issuecomment-762764500">https://github.com/pmndrs/jotai/issues/265#issuecomment-762764500</a>

<br />

# ğŸšªpackage.jsonì˜ exports ì˜µì…˜

ê°€ì¥ ë¨¼ì €, í”„ë¡œì íŠ¸ ë¹Œë“œ ê³¼ì •ì—ì„œ ì™œ CJS íŒŒì¼ì´ ì•„ë‹Œ ESM íŒŒì¼ì„ ê°€ì ¸ì˜¤ëŠ”ì§€ì— ëŒ€í•œ ìë£Œ ì¡°ì‚¬ê°€ í•„ìš”í–ˆê³ , `Jotai` í”„ë¡œì íŠ¸ì— ì‘ì„±ëœ `package.json`ì˜ `exports` ì˜µì…˜ ë•Œë¬¸ì´ë¼ëŠ” ì‚¬ì‹¤ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ì°¸ê³ í–ˆë˜ ìë£Œ â†’ <a href="https://toss.tech/article/commonjs-esm-exports-field">https://toss.tech/article/commonjs-esm-exports-field</a>

Jotaiì˜ pakage.jsoníŒŒì¼ì˜ exports ì˜µì…˜ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. â†’ <a href="https://github.com/pmndrs/jotai/blob/main/package.json">https://github.com/pmndrs/jotai/blob/main/package.json</a>

```js title="package.json"
"exports": {
    "./package.json": "./package.json",
    ".": {
      "types": "./index.d.ts",
      "import": {
        "types": "./esm/index.d.mts",
        "default": "./esm/index.mjs"
      },
      "default": "./index.js"
    },
    "./*": {
      "types": "./*.d.ts",
      "import": {
        "types": "./esm/*.d.mts",
        "default": "./esm/*.mjs"
      },
      "default": "./*.js"
}
```

ì „í™˜ì‘ì—… ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” `import jotai from â€˜jotaiâ€™` ì™€ ê°™ì´ `import(ESM ë¬¸ë²•)`ì„ í†µí•´ `Jotai`ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆì—ˆê³ , ì´ì— ë”°ë¼ `CJS` íŒŒì¼ (index.js)ì´ ì•„ë‹Œ, `ESM` íŒŒì¼(esm/index.mjs)íŒŒì¼ì„ ê°€ì ¸ì™€ ë¹Œë“œë¥¼ í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.  
(index.js íŒŒì¼ì´ CJS í˜•íƒœë¡œ ë¹Œë“œí•œ íŒŒì¼ì´ë¼ëŠ” ê²ƒì€ Jotaiì˜ rollup ì„¤ì • íŒŒì¼ì„ í†µí•´ í™•ì¸í–ˆìŠµë‹ˆë‹¤. â†’ <a href="https://github.com/pmndrs/jotai/blob/10001a7b34bf2dbd0cdff28b0f14877a4707e509/rollup.config.js#L86">https://github.com/pmndrs/jotai/blob/10001a7b34bf2dbd0cdff28b0f14877a4707e509/rollup.config.js#L86</a>)

<br />

# âœï¸ Webpack Path Alias ìˆ˜ì •

ì§€ê¸ˆê¹Œì§€ ì‚´í´ë³¸ ë°”ì— ë”°ë¥´ë©´, ë¹Œë“œ ê³¼ì •ì—ì„œ `CJS` íŒŒì¼ì´ ì•„ë‹Œ, `ESM` íŒŒì¼ì„ ê°€ì ¸ì˜¤ëŠ”ê²ƒì´ ë¬¸ì œì˜ ì›ì¸ì´ì—ˆìŠµë‹ˆë‹¤.  
ë”°ë¼ì„œ, ë¹Œë“œ ê³¼ì •ì—ì„œ `ESM` íŒŒì¼ì´ ì•„ë‹Œ `CJS` íŒŒì¼ì„ ê°€ì ¸ì˜¤ë„ë¡ ë§Œë“¤ë©´ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒí–ˆìŠµë‹ˆë‹¤.

ë‚´ë¶€ì ìœ¼ë¡œ ë²ˆë“¤ë§ì„ ìœ„í•´ `Webpack`ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆê³ , `Webpack`ì—ì„œëŠ” `resolve.alias` ì˜µì…˜ì„ í†µí•´ íŠ¹ì • ëª¨ë“ˆì˜ `path`ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í”íˆ ì‚¬ìš©ë˜ëŠ” `resolve.alias` ì„¤ì •ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. (`../../../` ê³¼ ê°™ì´ ìƒëŒ€ê²½ë¡œê°€ ê¸¸ì–´ì§€ëŠ” ê²ƒì„ í”¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©)

```js
const path = require("path");

module.exports = {
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src/"),
    },
  },
};

import a from "@/compoents/a";
```

ì´ì™€ ë˜‘ê°™ì´ node_modulesì— ìœ„ì¹˜í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” path ì—­ì‹œ ì„¤ì • í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
const path = require("path");

module.exports = {
  resolve: {
    alias: {
      jotai: path.resolve(__dirname, "../../../node_modules/jotai/index.js"),
    },
  },
};

import jotai from "jotai";
// '../../../node_modules/jotai/index.js' CJS íŒŒì¼ì„ ë¶ˆëŸ¬ì˜´
```

<br />

# ğŸ™Œ ê²°ê³¼

ê²°ê³¼ì ìœ¼ë¡œ, `IE`ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•œ `CJS` íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ë„ë¡ `Path Alias`ë¥¼ ìˆ˜ì •í•´ `IE`ì—ì„œë„ ì •ìƒë™ì‘í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.  
ì¶”ê°€ì ìœ¼ë¡œ, ë²ˆë“¤íŒŒì¼ì˜ ì‚¬ì´ì¦ˆ ì—­ì‹œ ESM íŒŒì¼ì„ ë¶ˆëŸ¬ì™”ì„ ë•Œì™€ CJS íŒŒì¼ì„ ë¶ˆëŸ¬ì™”ì„ ë•Œì˜ ì°¨ì´ê°€ ê±°ì˜ ì¡´ì¬í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤ :)
